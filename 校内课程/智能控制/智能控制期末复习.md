# 智能控制期末复习

## 第一章 计算机控制系统概述

- 计算机控制技术：把**计算机技术**和**自动化控制系统**融为一体

### 控制系统组成

#### 控制系统概念

- 计算机控制系统：**常规仪表控制系统**演变而来

- 常规仪表控制系统：**闭环控制**，**开环控制**

  - 闭环控制系统：**按偏差进行控制**

    <img src="https://img-blog.csdnimg.cn/f71249ce240349a9b2a97a6f2982463a.png" alt="image-20231122140302855" style="zoom:67%;" />

  - 开环控制系统：**按给定值直接进行控制**

    <img src="https://img-blog.csdnimg.cn/3c4c420e8f9b4609b8ddb004990dfef8.png" alt="image-20231122140315987" style="zoom:67%;" />

  - 计算机闭环控制系统：**把常规仪表闭环控制系统的控制器用计算机和`D/A`转换接口代替**

    <img src="https://img-blog.csdnimg.cn/aa6ec69d181f4281ab1bb54e0fcd3a95.png" alt="image-20231122140437329" style="zoom:67%;" />

  - 监控过程步骤：**实时数据采集，实时数据处理，实时输出控制**

#### 硬件组成

- 主机：`CPU`+`RAM`(随机存储器)+`ROM`(只读存储器)+系统总线

- 常规外部设备(外设)：输入/输出设备+外存储器

- 过程输入输出通道：`AI`，`AO`，`DI`，`DO`

- 操作台：`CRT`，`LED`，`LCD`

- 通信设备：交换机，`modem`，集线器

  图如下：

  <img src="https://img-blog.csdnimg.cn/c9664e31d153497589f2f2a10a4314fd.png" alt="image-20231122141611445" style="zoom:67%;" />

#### 软件组成

- 硬件仅为计算机控制系统的**躯体**
- **软件是完成各种功能的计算机程序的总和，是完成计算机控制系统的神经中枢，整个系统的动作都是在软件程序的指挥下协调工作的**
- 软件分为**系统软件**和**应用软件**两类

### 控制系统分类

- **数据采集系统(`DAS`)**：**所有计算机控制系统的基础**
- 操作指导控制系统(`OGC`)：基于数据采集系统的一种开环结构
- 直接数字控制系统(`DDC`)：用一台计算机完成对多个被控参数的数据采集，且按一定的控制规律进行实时决策，并通过输出通道发出控制信号以实现对生产过程的闭环控制
- 监督计算机控制系统(`SCC`)：`OGC`系统与常规仪表系统或与`DDC`系统综合而成的两级系统
- 分散控制系统(`DCS`)：以微处理器为基础，借助于计算机网络对生产过程进行集中管理和分散控制的先进计算机控制系统
- 现场总线控制系统(`FCS`)：一种全数字化、全分散式、可互操作的和全开放式的新型控制系统
- 计算机集成制造系统(`CIMS`)：计算机技术、网络技术、自动化技术、信号处理技术、管理技术和系统工程技术等新技术发展的结果，它将企业的生产、经营、管理、计划、产品设计、加工制造、销售及服务等环节和人力、财力、设备等生产要素集成起来，进行统一控制，求得生产活动的最优化

### 控制装置种类

- 可编程控制器(`PLC`)
- 可编程调节器
- 总线式工控机
- 嵌入式计算机系统
- 其他控制装置：分散控制系统与现场总线控制系统

## 第二章 模拟量输出通道

### 引言

- 模拟量输出通道的**任务**：**把计算机处理后的数字量信号转换成模拟量电压或电流信号，去驱动相应的执行器，从而达到控制的目的**

- 模拟量输出通道(称为`D/A`通道或`AO`通道)**构成**：**一般是由接口电路、数/模转换器(简称`D/A`或`DAC`)和电压/电流变换器等构成**

- 模拟量输出通道**基本构成**：**多`D/A`结构，共享`D/A`结构**

  多`D/A`结构：

  <img src="https://img-blog.csdnimg.cn/99ffc1869d9247e2bf576dde8ec42e74.png" alt="image-20231122143856168" style="zoom:67%;" />

  共享`D/A`结构：

  <img src="https://img-blog.csdnimg.cn/45d86a5ccc824caca43b540ab7d6caf8.png" alt="image-20231122143917400" style="zoom:67%;" />

### D/A转换器

#### 工作原理

图如下：

<img src="https://img-blog.csdnimg.cn/2282cce289c640d98e8e795995acc625.png" alt="image-20231122144654634" style="zoom:67%;" />

#### 性能指标

- 分辨率：`D/A`转换器能分辨的最小输出模拟增量，即当输入数字发生单位数码变化时所对应输出模拟量的变化量。它取决于能转换的二进制位数，数字量位数越多，分辨率也就越高
- 转换精度：转换后所得的实际值和理论值的接近程度
- 偏移量误差：输入数字量时，输出模拟量对于零的偏移值
- 稳定时间：描述`D/A`转换速度快慢的一个参数，指从输入数字量变化到输出模拟量达到终值误差`1/2LSB`时所需的时间

。。。

## 第三章 模拟量输入通道

第二章和第三章太难了，先看后面的

。。。

## 第四章 数字量输入/输出通道

在微机控制系统中，除了需要处理模拟信号，还要处理数字信号，包括开关信号，脉冲信号等等。

### 光电耦合隔离技术

#### 光电耦合隔离器

- 三种类型：**三极管型，单向可控硅型，双向可控硅型**

- 原理：通过电，光，电这种信号转换，利用光信号的传送不受电磁场的干扰完成隔离功能

  <img src="https://img-blog.csdnimg.cn/4fb570200ec04ac78b3f9f116ff63307.png" alt="image-20231123102119091" style="zoom:67%;" />

#### 光电耦合隔离电路

- **同相传递：输入输出同向，输入为低，输出为低**
- **反相传递：输入输出反向，输入为高，输出为低**

<img src="https://img-blog.csdnimg.cn/76c57464b2654537ae3bbdfb9f723a4b.png" alt="image-20231123102639789" style="zoom:67%;" />

### 数字量输入通道(DI)

- 任务：**把生产过程中的数字信号转换成计算机易于接受的形式**
- 信号调理电路：虽然都是数字信号，不需进行`A/D`转换，但**对通道中可能引入的各种干扰必须采取相应的技术措施，即在外部信号与单片机之间要设置输入信号调理电路**

#### 开关输入电路

考虑：

- 电平转换：用电阻分压法把电流信号转换为电压信号
- `RC`滤波：用`RC`滤波器滤出高频干扰
- 过电压保护：用稳压管和限流电阻作过电压保护；用稳压管或压敏电阻把瞬态尖峰电压箝位在安全电平上
- 反电压保护：串联一个二极管防止反极性电压输入
- 光电隔离：用光耦隔离器实现计算机与外部的完全电隔离

开关量输入信号调理电路

<img src="https://img-blog.csdnimg.cn/3a997d54066a4a8e81fe7d99b345dcde.png" alt="image-20231123103850760" style="zoom:67%;" />

#### 脉冲计数电路

<img src="https://img-blog.csdnimg.cn/57cc362ebfd6464ea0edcfc3c7e39251.png" alt="image-20231123104019996" style="zoom:67%;" />

### 数字量输出通道(DO)

- 任务：**把计算机输出的微弱数字信号转换成能对生产过程进行控制的数字驱动信号**
- 常用电路：**三极管输出驱动电路、继电器输出驱动电路、晶闸管输出驱动电路、固态继电器输出驱动电路**
- 选择：根据现场负荷的不同，如指示灯、继电器、接触器、电机、阀门等，可以选用不同的功率放大器件构成不同的开关量驱动输出通道

#### 三极管驱动电路

- 分类：普通三极管驱动电路，达林顿驱动电路

##### 普通三极管驱动电路

<img src="https://img-blog.csdnimg.cn/d18a4eff899044709e6c84eda50c08b7.png" alt="image-20231123104947847" style="zoom:67%;" />

##### 达林顿驱动电路

<img src="https://img-blog.csdnimg.cn/94fba42e228b4413959caef9109ed06c.png" alt="image-20231123105124602" style="zoom:67%;" />

MC1416一路驱动电路

<img src="https://img-blog.csdnimg.cn/659eee0bff3c44c2a8810a87c03622d5.png" alt="image-20231123105224373" style="zoom: 67%;" />

#### 继电器驱动电路

<img src="https://img-blog.csdnimg.cn/44dc62d9c8ec4b809d44930e8fc7320e.png" alt="image-20231123105300226" style="zoom:67%;" />

#### 晶闸管驱动电路

- 分类：**单向晶闸管，双向晶闸管**
- 结构：**阳极A、阴极K、控制极（门极）G**(三个极)

#### 固态继电器驱动电路

- **固态继电器SSR**（Solid State Relay）：是一种新型的无触点开关的电子继电器，它利用电子技术实现了控制回路与负载回路之间的电隔离和信号耦合，而且没有	任何可动部件或触点，却能实现电磁继电器的功能
- 优点：**体积小、开关速度快、无机械噪声、无抖动和回跳、寿命长**

固态继电器输出驱动电路

<img src="https://img-blog.csdnimg.cn/8ce0f61938894ee7ba81038ed214caf9.png" alt="image-20231123105658610" style="zoom:67%;" />

### DI/DO模板

**把数字量输入输出通道设计在一块模板上**，就称为`DI/DO`模板

<img src="https://img-blog.csdnimg.cn/17ecae813ae94cd3b797f56af9fe5603.png" alt="image-20231123105738964" style="zoom:67%;" />

## 第五章 键盘及其接口技术

### 引言

- 键盘
  - 常用的输入设备，是一组按键的集合
  - 通过功能分类：**数字键和功能键**
  - 作用：输入数据与命令，查询和控制系统的工作状态，实现简单的人机对话
- 键盘接口电路
  - 分类：**编码键盘和非编码键盘**
  - 编码键盘
    - 采用硬件编码电路来实现键的编码，每按下一个键，键盘便能自动产生按键代码。编码键盘主要有BCD码键盘、ASCII码键盘等类型
    - 特点：使用方便，键盘码**产生速度快，占用CPU时间少**，但对按键的检测与消除抖动干扰是靠硬件电路来完成的，因而硬件电路复杂、成本高
  - 非编码键盘
    - 仅提供按键的通或断状态，按键代码的产生与识别由软件完成
    - 特点：硬件电路简单，成本低，但**占用CPU的时间较长**

### 键盘输入电路

#### 抖动干扰

- 定义：**由于机械触点的弹性振动，按键在按下时不会马上稳定的接通，在弹起时也不能一下完全的断开，从而会出现一连串的抖动，这种抖动就称为按键的抖动干扰**

#### 抖动干扰的消除

- 硬件方法：**设计一个滤波延时电路或单稳态电路**
- 软件方法：**编制一段时间大于100ms的延时程序**

### 非编码独立式键盘

#### 查询法接口电路

电路

<img src="https://img-blog.csdnimg.cn/cb88fba67202403a97bf0ed51e298093.png" alt="image-20231123111857176" style="zoom:67%;" />

流程图

<img src="https://img-blog.csdnimg.cn/638d2b3250e740c3a3c0c3e5b1ffb06e.png" alt="image-20231123111909659" style="zoom:67%;" />

过程

**开关`Si`闭合的时候，对应的`Di`=0；CPU查询检测是否有键按下，之后先消除抖动，然后判断键号，然后再转为对应的键功能程序**

#### 中断法接口电路

<img src="https://img-blog.csdnimg.cn/c1e2e5a6942244d1ba2278716c1155c8.png" alt="image-20231123112139191" style="zoom:67%;" />

### 非编码矩阵式键盘

#### 结构组成

矩阵式键盘又叫行列式键盘，是用`I/O`口线组成的行、列矩阵结构，在每根行线与列线的交叉处，**二线不直接相通而是通过一个按键跨接接通**。采用这种矩阵结构只需`M`根行输出线和N根列输入线，就可连接`M×N`个按键。通过键盘扫描程序的行输出与列输入就可确认按键的状态，再通过键盘处理程序便可识别键值。 

结构图

<img src="https://img-blog.csdnimg.cn/7ec93ca112874d67b3d2d88f9aaf6ee7.png" alt="image-20231123113312194" style="zoom:67%;" />

#### 程序设计

- **必须考虑实时性，消除抖动干扰**
- 方式：**编程扫描，定时扫描和中断扫描**

### 编码键盘

#### 二进制编码器

<img src="https://img-blog.csdnimg.cn/7dced679fd29435590d7aae34dda7ab5.png" alt="image-20231123113616999" style="zoom:67%;" />

#### 编码键盘接口电路

<img src="https://img-blog.csdnimg.cn/ae57e7d2fcac473f904b986a9998460c.png" alt="image-20231123113659234" style="zoom:67%;" />

消抖电路

<img src="https://img-blog.csdnimg.cn/46f6f2d1cb4046d29d4415179fff32e6.png" alt="image-20231123113729301" style="zoom:67%;" />

## 第六章 显示器及其接口技术

### 引言

- 显示装置：用来显示生产过程的工艺状况与运行结果

常用的显示器件

- 显示记录仪：以模拟方式连续显示和记录过程参数的动态变化，但其价格都很贵，在目前的计算机控制系统中已很少采用
- `LED`数码管：具有**结构简单、体积小、功耗低、配置灵活、显示清晰、可靠性高**等优点，已被微型计算机控制系统及智能化仪表广泛采用
- `LCD`：以其功耗极低的特点，占据了从电子表到计算器，从袖珍仪表到便携式微型计算机等应用场合
- `CRT`终端：以其图文并茂的直观生动画面，可以显示生产过程中的各种画面及报表，如生产流程图、显示报警图、趋势曲线图、	       路查询图等,在很多微型计算机控制系统中，特别在`DDC`，`SCC`以及`DCS`控制系统中，大都采用CRT操作台进行监视和控制

### LED数码管显示器

#### 工作原理

- `LED`：利用`PN`结把电能转换成光能的固体发光器件，根据制造材料的不同可以发出红、黄、绿、白等不同色彩的可见光来
- 伏安特性：类似普通二极管，正向压降约为2伏左右，工作电流一般在10-20`mA`
- 结构特性：单段的圆形或方形LED常用来显示设备的运行状态，8段`LED`可以显示各种数字和字符

#### 8段LED显示器

##### 结构与工作原理

- **共阴极：阴极并接成为公共端`COM`，加高电平灯亮**

- **共阳极：阳极并接成为公共端`COM`，加低电平灯亮**

  <img src="https://img-blog.csdnimg.cn/5e79a44807e34779ab4081ba250b7262.png" alt="image-20231123143020757" style="zoom:67%;" />

##### 选码原理

- 点亮8段`LED`不同段的组合，就可以显示十六进制数

<img src="https://img-blog.csdnimg.cn/90ce2cd7fe7941fd83de885238ad21b3.png" alt="image-20231123143230868" style="zoom:67%;" />

#### LED显示器显示方式

- `n`个`LED`显示器构成n位显示
- **把点亮`LED`某一段的控制称为段选，而把点亮`LED`某一位的控制称为位选或片选**

##### 静态显示

- 结构特点
  - **无位选，4个`COM`端连接在一起并接有效电平**
  - **段选独立，每个`LED`的段选各自与一个8位的并行`I/O`相连**
- 工作特点
  - **优点：占用`CPU`机时少，显示稳定可靠**
  - **缺点：电路中占用`I/O`口资源多**
- 适用：**规模较大的实时控制系统**

<img src="https://img-blog.csdnimg.cn/6bb4e8f63e514069b8baaefc07ff120e.png" alt="image-20231123143606574" style="zoom:67%;" />

##### 动态显示

- 结构特点
  - **4个LED显示器各自的段选线连在一起，与一个8位的I/O口相连**
  - **各自的COM端则由另一个I/O口进行位选**
- 工作特点
  - **优点：占用I/O资源少**
  - **缺点：需用软件程序不断地循环扫描定时刷新，因而占用了CPU的大多数机时**
- 适用：**小型测控系统**

<img src="https://img-blog.csdnimg.cn/509b71648b164f5e9dff5864371ad14e.png" alt="image-20231123144933894" style="zoom:67%;" />

#### LED显示器接口电路

- 正常工作必须有：**显示部分、锁存器、译码、驱动电路**

##### 静态显示接口电路

- 锁存，驱动，译码均由硬件实现(`CD4511B)`

- 实现过程：`74LS138`输出作为`LED`片选，每两个共用一个片选；每两个段选码共用一个字节

- 接口电路

  <img src="https://img-blog.csdnimg.cn/a0e9315beeb04dc6ac0e3325cf51b5ad.png" alt="image-20231123145649205" style="zoom:67%;" />

##### 动态显示接口电路

- 锁存，驱动由硬件实现

- 译码由软件实现

- 实现过程

  <img src="https://img-blog.csdnimg.cn/379ed0cf47a74eb69afff50d8c5816d0.png" alt="image-20231123145933065" style="zoom:67%;" />

- 接口电路

  <img src="https://img-blog.csdnimg.cn/532ed52e7fb54d6f89365691fb430599.png" alt="image-20231123150002173" style="zoom:67%;" />

### LCD液晶显示器

#### 引言

- 一种利用液晶的扭曲/向列效应制成的新型显示器
- 特点：**功耗极低、体积小、抗干扰能力强、价格廉价**等
- 分类：**段位式、字符式和点阵式**

#### LCD显示器驱动方式

- 直接驱动(静态驱动)：显示器件只有一个背极（即下玻璃电极基板），但每个字符段都有独立的引脚
- 间接驱动(时分割驱动)：显示器具有多个背极，各字符段按点阵结构排列，这是显示字段较多时常采用的驱动方式

工作过程

<img src="https://img-blog.csdnimg.cn/785161c25b16464da4b8087c1e4219e7.png" alt="image-20231123150810238" style="zoom:67%;" />

段位式7段`LCD`的电极配置及译码驱动电路

<img src="https://img-blog.csdnimg.cn/5a21938e873441fd852cc2d4a42d5ae1.png" alt="image-20231123150825707" style="zoom:67%;" />

#### 段位式LCD接口电路

硬件电路

<img src="https://img-blog.csdnimg.cn/d98fd9ba8f51495ab8f72624439f911b.png" alt="image-20231123150746085" style="zoom:67%;" />

#### 点阵式LCD接口电路

##### 引言

- **点阵式`LCD`不但可以显示字符，而且可以显示各种图形及汉字**
- 液晶显示模块`12864`

##### 液晶模块接线原理

<img src="https://img-blog.csdnimg.cn/f9cbf36854a0496aafa3083ff6a5b748.png" alt="image-20231123151215905" style="zoom:67%;" />

##### 液晶模块指令说明

<img src="https://img-blog.csdnimg.cn/91d812e4d4b24aa6a12f2fe583ab3eb1.png" alt="image-20231123151237866" style="zoom:67%;" />

##### 软件初始化

<img src="https://img-blog.csdnimg.cn/3c7d6a29e157496a9dca015b6c49d4bc.png" alt="image-20231123151300918" style="zoom:67%;" />

##### 应用举例

液晶字符显示使用的时候注意：

- 要在某一个位置显示中文字符时，应先设定显示字符位置，即先设定显示地址，再写入中文字符编码
- 显示`ASCII`字符过程与显示中文字符过程相同。不过在显示连续字符时，只须设定一次显示地址，由模块自动对地址加1指向下一个字符位置，否则，显示的字符中将会有一个空`ASCII`字符位置
- 当字符编码为2字节时，应先写入高位字节，再写入低位字节

### 图形显示器

#### 概述

- 分类：**`CRT`显示器和`TFT`平面显示器**
- `CRT`显示器
  - 由一个图形监示器和相应的控制电路组成。在工业计算机中，插入一块`VGA/TVGA`图形控制板即可实现功能很强的图象显示功能
  - 优点：丰富的画图命令，如点、线、矩形、多边形、圆、弧以及区域填充、拷贝、剪裁等操作还有窗口功能等
  - 缺点：体积与功耗大，易受振动和冲击，容易受射线辐射、磁场干扰，因此在恶劣工况下须采用特殊加固和屏蔽措施
- `TFT`平面显示器
  - 体积小，耗电省，如最薄的壁挂式机型厚度仅为`5cm`(`2in`)
  - 可靠性高，寿命长，不易受振动、冲击和射线的干扰影响
  - 显示颜色`256`种基色，可扩展至`25600`种组合

#### 图形显示界面

- 作用：直观形象地监视和操作工业生产过程
- 显示画面功能：反映出整个生产的工艺流程，便于单元操作控制；要有实时动态数据，又要有历史记忆功能
- 显示画面功能内容：调节器、指示仪、记录仪、报警仪、模拟屏以及开关按钮、指示灯等
- 设计语言：早期用汇编语言来编写，后来多采用高级语言，现在采用组态软件
- 常用的显示画面：**总貌画面、分组画面、点画面、流程图画面、趋势曲线画面、报警显示画面、操作指导画面**等

## 第七章 数据处理技术

### 引言

- 数据采集：**在计算机控制系统中，是最基本的一种模式**。一般是通过传感器、变送器把生产过程的各种物理参数转换成电信号，然后经`A/D`通道或`DI`通道，把数字量送入计算机中
- 数据处理：计算机在对这些数字量进行显示和控制之前，还必须根据需要进行相应的数值计算即数据处理。为了满足不同系统的需要，设计出了许多有效的数据处理技术方法，如**预处理，数字滤波，标度变换，查表和越限报警**等

### 测试数据预处理技术

- 技术：**数字调零技术，系统校准技术，输入和输出数据的极性与字长的预处理技术**

#### 系统误差的自动校准

- 系统误差：在控制系统的测量输入通道中，一般均存在**放大器等器件的零点偏移和漂移**，会造成**放大电路的增益误差及器件参数的不稳定**等现象

- 特点：在一定的测量条件下，其变化规律是可以掌握的，产生误差的原因一般也是知道的

- 处理方法：通过适当的技术方法如**数字调零、系统校准**来确定并加以校正的，一般采用软件程序进行处理

  - 数字调零

    - 处理由零点偏移造成的系统误差，通过软件进行实现
    - 原理：`CPU`分时巡回采集`1`路至`n`路电压信号
    - 特点：**可去掉放大电路、`A/D`转换电路本身的偏移及随时间与温度而发生的各种漂移的影响，从而大大降低对这些电路器件的偏移值的要求，降低硬件成本**
    - 缺点：**不能校正由传感器本身引入的误差**

    <img src="https://img-blog.csdnimg.cn/88ed30d11ff7422db2c8ae355efa13a6.png" alt="image-20231123153657445" style="zoom:67%;" />

  - 系统校准

    - 原因：**克服传感器本身引入的误差**
    
    - 系统校准计算
    
      <img src="https://img-blog.csdnimg.cn/5ce6dba62b544cd4ae6f88bff7944dc9.png" alt="image-20231124111008876" style="zoom:67%;" />
    
    - 适用场合：**传感器特性随时间会发生变化的场合**

#### 数据字长的预处理

- 输入位数大于输出位数：**忽略高位数的最低几位**
- 输入位数小于输出位数：**将8位数左移两位构成`10`位数，最低两位用`0`填充**

### 数字滤波方法

- 分类：**平均值滤波，中值滤波，限幅滤波，惯性滤波**

#### 平均值滤波

- 分类：**算术平均，去极值平均，加权平均，滑动平均**

- 适用场合：工业场合经常遇到的尖脉冲干扰的信号滤波

- 缺点：灵敏度和平滑度较差

- 算术平均值滤波

  - 在采样周期`T`内，对测量信号`y`进行`m`次采样， 把`m`个采样值相加后的算术平均值作为本次的有效采样值

    <img src="https://img-blog.csdnimg.cn/0754bda8f228454d8696868d6671d5ac.png" alt="image-20231124114239824" style="zoom:67%;" />

- 去极值平均滤波

  - 对连续采样的`m`个数据去掉其中的最大值与最小值，然后计算余下的`m-2`个数据的算术平均值

